plugins {
    id "org.springframework.boot" version "${springBootVersion}"
    id 'com.avast.gradle.docker-compose' version "0.17.5"
}

apply plugin: 'java'
apply plugin: 'docker-compose'

group = 'matplayground'
version = '1.0-SNAPSHOT'

description = """"""

tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
}

repositories {
    mavenLocal()
    maven {
        url = uri('https://repo.maven.apache.org/maven2/')
    }
}

dependencies {

    implementation "org.springframework.boot:spring-boot-starter-data-mongodb-reactive:${springBootVersion}"
    implementation "org.springframework.boot:spring-boot-starter-webflux:${springBootVersion}"
    implementation "org.springframework.boot:spring-boot-starter-actuator:${springBootVersion}"
    testImplementation "org.springframework.boot:spring-boot-starter-test:${springBootVersion}"

    implementation "com.google.guava:guava:30.1-jre"

    implementation "org.projectlombok:lombok:1.18.26"
    annotationProcessor "org.projectlombok:lombok:1.18.26"

    implementation "org.apache.commons:commons-lang3:3.12.0"

    // JUnit 5
    testImplementation "org.junit.jupiter:junit-jupiter:${jUnitVersion}"
    testRuntimeOnly "org.junit.platform:junit-platform-launcher"
    testImplementation "org.junit.platform:junit-platform-suite"

    testImplementation "io.cucumber:cucumber-java:${cukeVersion}"
    testImplementation "io.cucumber:cucumber-spring:${cukeVersion}"
    testImplementation "io.cucumber:cucumber-junit-platform-engine:${cukeVersion}"

    testImplementation "org.hamcrest:hamcrest:2.2"

    implementation "org.springdoc:springdoc-openapi-starter-webflux-ui:${springdocVersion}"

}

test {
    useJUnitPlatform()
    systemProperty("cucumber.junit-platform.naming-strategy", "long")
    testLogging.showStandardStreams = true
}

dockerCompose.isRequiredBy(test)
dockerCompose {
    useComposeFiles = ['src/test/resources/docker-compose.yml']
}

springBoot {
    buildInfo()
}
